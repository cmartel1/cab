<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deal or No Deal</title>
    <style>
        body {
            font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
            text-align: center;
            margin: 20px;
            background-color: #006644;
            color: white;
        }

        h1 {
            font-size: 2em;
            margin-top: 30px;
            margin-bottom: 20px;
            font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;

        }

        #cases {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
        }

        .case-row {
            display: flex;
            flex-basis: 100%;
            margin-bottom: 20px;
            justify-content: space-evenly;
        }

        .case {
            flex: 0 0 calc(80% / 8); /* Adjusted width for up to eight cases per row */
            margin: 10px;
            cursor: pointer;
            border: 3px solid #2b2b2b;
            border-radius: 10px;
            overflow: hidden;
            position: relative;
            transition: transform 0.2s;
            background-color: #004d38; /* Darker background color */
        }

        .case:hover {
            transform: scale(1.05);
        }

        .case img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 7px; /* Slightly rounded corners for images */
        }

        .highlighted {
            border-color: gold;
        }

        #resetButton {
            padding: 10px;
            font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
            color: black;
            border: 3px solid #2b2b2b;
            border-radius: 5px;
            width: 100px;
            cursor: pointer;
            transition: transform 0.2s;
            background-color: gold; /* Green background color */
            display: none; /* Hide the reset button initially */
        }

        #resetButton:hover {
            transform: scale(1.05);
        }

        #navbar {
            background-color: #004d38; /* Darker background color for the navbar */
            padding: 10px;
            display: flex;
            justify-content: space-evenly;
            margin-bottom: 20px;
            border-radius: 10px;
        }

        #navbar a {
            color: white;
            text-decoration: none;
            font-size: 1.2em;
            margin: 0 15px;
        }

        #navbar a:hover {
            border-bottom: 2px solid gold;
        }
        #caseCount{
            margin-bottom: 10px;
        }
        input#caseCount {
    padding: 10px;
    font-size: 1em;
    border: 2px solid #2b2b2b;
    border-radius: 5px 0 0 5px; /* Adjusted border radius for a smoother look */
    width: 80px;
    height: 40px;
    box-sizing: border-box;
}

/* Updated CSS for the "Update Cases" button */
button#updateButton {
    padding: 10px;
    font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
    color: white;
    border: 2px solid #2b2b2b;
    border-radius: 0 5px 5px 0; /* Adjusted border radius for a smoother look */
    cursor: pointer;
    transition: background-color 0.3s, transform 0.2s;
    background-color: #4CAF50; /* Green background color */
    width: 120px;
    height: 40px;
    box-sizing: border-box;
}

button#updateButton:hover {
    background-color: #45a049; /* Darker green on hover */
    transform: scale(1.05);
}
    </style>
</head>
<body>

<h1>CAB Deal or No Deal</h1>
<div id="navbar">
    <a href="cases.html">Cases</a>
    <a href="mario.html">Mario</a>
    <a href="montyhall.html">Monty Hall</a>
</div>

<!-- Input box for the number of cases -->
<label for="caseCount">Enter the number of cases: </label>
<input type="number" id="caseCount" name="caseCount" min="1" value="3" max="24">
<button id="updateButton" onclick="updateCases()">Update Cases</button>
<div id="cases">
    <!-- Row 1 -->
    <div class="case-row">
        <div class="case" onclick="changeImage(0)">
            <img src="images/cases/case1.png" alt="Case 1">
        </div>
        <div class="case" onclick="changeImage(1)">
            <img src="images/cases/case2.png" alt="Case 2">
        </div>
        <div class="case" onclick="changeImage(2)">
            <img src="images/cases/case3.png" alt="Case 3">
        </div>
        <div class="case" onclick="changeImage(3)">
            <img src="images/cases/case4.png" alt="Case 4">
        </div>
        <div class="case" onclick="changeImage(4)">
            <img src="images/cases/case5.png" alt="Case 5">
        </div>
        <div class="case" onclick="changeImage(5)">
            <img src="images/cases/case6.png" alt="Case 6">
        </div>
        <div class="case" onclick="changeImage(6)">
            <img src="images/cases/case7.png" alt="Case 7">
        </div>
        <div class="case" onclick="changeImage(7)">
            <img src="images/cases/case8.png" alt="Case 8">
        </div>
    </div>

    <!-- Row 2 -->
    <div class="case-row">
        <div class="case" onclick="changeImage(8)">
            <img src="images/cases/case9.png" alt="Case 9">
        </div>
        <div class="case" onclick="changeImage(9)">
            <img src="images/cases/case10.png" alt="Case 10">
        </div>
        <div class="case" onclick="changeImage(10)">
            <img src="images/cases/case11.png" alt="Case 11">
        </div>
        <div class="case" onclick="changeImage(11)">
            <img src="images/cases/case12.png" alt="Case 12">
        </div>
        <div class="case" onclick="changeImage(12)">
            <img src="images/cases/case13.png" alt="Case 13">
        </div>
        <div class="case" onclick="changeImage(13)">
            <img src="images/cases/case14.png" alt="Case 14">
        </div>
        <div class="case" onclick="changeImage(14)">
            <img src="images/cases/case15.png" alt="Case 15">
        </div>
        <div class="case" onclick="changeImage(15)">
            <img src="images/cases/case16.png" alt="Case 16">
        </div>
    </div>

    <!-- Row 3 -->
    <div class="case-row">
        <div class="case" onclick="changeImage(16)">
            <img src="images/cases/case17.png" alt="Case 17">
        </div>
        <div class="case" onclick="changeImage(17)">
            <img src="images/cases/case18.png" alt="Case 18">
        </div>
        <div class="case" onclick="changeImage(18)">
            <img src="images/cases/case19.png" alt="Case 19">
        </div>
        <div class="case" onclick="changeImage(19)">
            <img src="images/cases/case20.png" alt="Case 20">
        </div>
        <div class="case" onclick="changeImage(20)">
            <img src="images/cases/case21.png" alt="Case 21">
        </div>
        <div class="case" onclick="changeImage(21)">
            <img src="images/cases/case22.png" alt="Case 22">
        </div>
        <div class="case" onclick="changeImage(22)">
            <img src="images/cases/case23.png" alt="Case 23">
        </div>
        <div class="case" onclick="changeImage(23)">
            <img src="images/cases/case24.png" alt="Case 24">
        </div>
    </div>
<button id="resetButton" onclick="resetGame()">Reset</button>

<script>
    var selectedCases = 0;
    var lastClickedCase = null;
    var greenCheckCaseIndices = [];
    var caseCount = 0;

    function updateCases() {
        caseCount = document.getElementById("caseCount").value;
        // Validate the input
        if (isNaN(caseCount) || caseCount < 1) {
            alert("Please enter a valid number greater than 0.");
            return;
        }

        // Update the number of cases without changing the selected images
        generateCases(caseCount);

        // Randomly select two cases to be green check cases
        greenCheckCaseIndices = getRandomIndices(caseCount, 2);

        // Display the reset button
        document.getElementById('resetButton').style.display = 'block';
    }

    function getRandomIndices(max, count) {
        var indices = [];
        while (indices.length < count) {
            var randomIndex = Math.floor(Math.random() * max);
            if (!indices.includes(randomIndex)) {
                indices.push(randomIndex);
            }
        }
        return indices;
    }

    function generateCases(caseCount) {
        // Reset the game
        selectedCases = 0;
        lastClickedCase = null;
        greenCheckCaseIndices = [];

        // Dynamically generate case rows
        var casesContainer = document.getElementById("cases");
        casesContainer.innerHTML = ""; // Clear existing content

        // Determine the number of cases per row with a maximum of 8
        var casesPerRow = Math.min(caseCount, 8);

        for (var j = 0; j < caseCount; j += casesPerRow) {
            var caseRow = document.createElement("div");
            caseRow.className = "case-row";
            for (var k = 0; k < casesPerRow; k++) {
                var caseIndex = j + k;
                if (caseIndex < caseCount) {
                    var caseElement = document.createElement("div");
                    caseElement.className = "case";
                    caseElement.onclick = function (index) {
                        return function () {
                            changeImage(index);
                        };
                    }(caseIndex);

                    var caseImage = document.createElement("img");
                    caseImage.src = "images/cases/case" + (caseIndex + 1) + ".png";
                    caseImage.alt = "Case " + (caseIndex + 1);

                    caseElement.appendChild(caseImage);
                    caseRow.appendChild(caseElement);
                }
            }
            casesContainer.appendChild(caseRow);
        }
    }

    function changeImage(index) {
        var caseElement = document.getElementsByClassName("case")[index];
        if (caseElement.classList.contains('highlighted')) {
            return;
        }

        // Check if the clicked case is a green check case
        if (greenCheckCaseIndices.includes(index)) {
            caseElement.querySelector('img').src = "images/cases/greencheck.png";
            playWinnerAudio();
        } else {
            // Change the image to "redx.png"
            caseElement.querySelector('img').src = "images/cases/redx.png";
        }

        if (lastClickedCase) {
            lastClickedCase.classList.remove('highlighted');
        }

        caseElement.classList.add('highlighted');
        lastClickedCase = caseElement;

        caseElement.onclick = null;

        selectedCases++;

        if (selectedCases === caseCount) {
            document.getElementById('resetButton').style.display = 'block';
        }
    }

    function playWinnerAudio() {
        // Play the "winner.mp3" sound
        var audio = new Audio('music/winner.mp3');
        audio.play();
        audio.preload = 'auto';
    }

    function resetGame() {
        location.reload();
    }

    // Initial generation of cases
    generateCases(3);
</script>
</body>
</html>
